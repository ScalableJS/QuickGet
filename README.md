# QNAP Download Station 5 Remote Client

QuickGet Remote is a browser extension that provides a focused interface for QNAP Download Station 5. It streamlines remote task management by exposing the most common actions directly in the browser.

## Capabilities

- Send links, magnet URIs, or torrent files to Download Station with a single action.
- Monitor active tasks, review seeding items, and remove entries when necessary.
- Validate NAS settings directly from the popup and persist them locally.
- Operate on Chromium-based browsers and Firefox without additional plugins.

## Installation

### Chrome / Edge / Chromium
1. Download the current release build.
2. Open `chrome://extensions` (or `edge://extensions`).
3. Enable *Developer mode*.
4. Select *Load unpacked* and choose the `dist` directory.

### Firefox
1. Open `about:debugging#/runtime/this-firefox`.
2. Select *Load Temporary Add-on...*.
3. Choose `dist/manifest.json`.

## Configuration

1. Open the QuickGet Remote popup.
2. Click the ⚙ button to open Settings and specify NAS connection parameters:
   - NAS address (IP or hostname)
   - Port number
   - Username and password
   - HTTPS toggle, temporary directory, and destination directory (optional)
3. Run *Test Connection* to confirm credentials, then *Save Settings*.
4. Close Settings to return to the downloads list; add torrents or manage existing tasks from the toolbar.

All configuration values are stored in `chrome.storage.local` and remain on the local browser profile. No data is transmitted to external services.

## Development

### Prerequisites
- Node.js 18 or newer
- npm (bundled with Node.js)

### Setup

```bash
git clone <repo-url>
cd SendToQNAP
npm install
```

### Key Scripts

```bash
npm run dev              # Start Vite in watch mode
npm run build            # Create production bundle
npm run typecheck        # Run TypeScript without emitting files
npm run lint             # Execute ESLint checks
npm run lint:fix         # Auto-fix lint warnings
npm run format           # Format with Prettier
npm run generate-icons   # Generate icon set from sources
npm run storybook        # Start Storybook for component development
npm run build-storybook  # Build static Storybook
```

## Project Layout

```
SendToQNAP/
├── src/
│   ├── api/              // OpenAPI-based QNAP API client
│   ├── background/       // Service worker (alarms, menus, actions)
│   ├── lib/              // Core utilities (config, logger, settings, tasks)
│   ├── popup/            // Main UI entry point
│   │   ├── components/   // Reusable UI components (downloadItem, statusPill)
│   │   ├── features/     // Feature modules (downloads, settings, toolbar, upload, debug)
│   │   ├── render/       // Rendering utilities
│   │   └── shared/       // Shared popup utilities (API cache, DOM helpers, formatters)
│   └── ui/               // Shared UI utilities
├── dist/                 // Build output (generated by Vite)
├── icons/                // Extension icons and sources
├── scripts/              // Build helpers (icon generation)
├── _locales/             // Internationalization files
├── docs/                 // Project documentation
└── manifest.json         // Chrome/Firefox manifest v3
```

## Documentation

Additional documentation is available in the `docs/` directory:
- [popup-refactoring-plan.md](./docs/popup-refactoring-plan.md) — Popup architecture and refactoring notes
- [toolbar-actions.md](./docs/toolbar-actions.md) — Toolbar implementation details

## Security and Data Handling

- Credentials and NAS settings are stored locally in `chrome.storage.local`.
- HTTPS connections are supported when the NAS is configured with TLS.
- The extension requests only the permissions required for context menus, storage, alarms, and notifications.
- No analytics, telemetry, or third-party network calls are embedded in the build.

## Troubleshooting Checklist

**Extension fails to load**
- Verify browser version (Chrome/Edge ≥ 120, Firefox ≥ 121).
- Confirm the extension was loaded from the `dist` directory.

**Connection errors**
- Re-check NAS address and port.
- Validate that Download Station is enabled on the NAS.
- Use *Test Connection* after saving credentials.

**Need more detail**
- Enable debug mode in the extension settings to see detailed logs in the browser console.

## Browser Compatibility

| Browser | Minimum version | Notes            |
|---------|-----------------|------------------|
| Chrome  | 120             | Manifest V3 build |
| Edge    | 120             | Same as Chrome    |
| Firefox | 121             | Temporary add-on loading |

## Architecture

### API Client
The extension uses `openapi-fetch` with OpenAPI schema definitions for type-safe QNAP API communication. API client is located in `src/api/` with automatic TypeScript types generated from the schema.

### UI Components
- **Component-based architecture** with reusable components in `src/popup/components/`
- **Feature modules** organize functionality (downloads, settings, toolbar, upload, debug)
- **morphdom** for efficient DOM updates without full re-renders
- **Storybook** for component development and testing

### State Management
- Chrome storage API for persistence (`chrome.storage.local`)
- Feature-specific state managers (downloads, toolbar)
- Client-side caching for API responses

## Contributing

1. Fork the repository.
2. Create a feature branch: `git checkout -b feature/<name>`.
3. Run `npm run typecheck && npm run lint && npm run build` before submitting changes.
4. Open a pull request with a concise description of the change.

Pull requests are preferred to long-lived forks so improvements remain consolidated.

## License

QuickGet Remote is distributed under the **Creative Commons Attribution–NonCommercial–ShareAlike 4.0 International (CC BY-NC-SA 4.0)** license.  
- Non-commercial use only.  
- Derivative work must use the same license.  
- Provide attribution with a link to this repository and the license text.  

Full text: <https://creativecommons.org/licenses/by-nc-sa/4.0/legalcode>

---

Version 2.9.0 (October 2025)  
Status: Production ready  
License: CC BY-NC-SA 4.0
